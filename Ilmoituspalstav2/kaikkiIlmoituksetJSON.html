<html>
<head>
<meta charset="UTF-8"> 
<title>Myyntipaikka netissä - osta, myy &amp; vaihda!</title>
<meta name="author" content="Sirpa Marttila">
<link href="ilmoitus.css" rel="stylesheet">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<body>
	<header>Kaikki ilmoitukset</header>

	<article>
		<div id="lista"></div>
	</article>

	<footer> 
		<br>Sirpa Marttila<br> Web-ohjelmointi
	</footer>
	
	<script type="text/javascript"> //skriptit aina bodyn loppuun että muut elementit on ladattu

		$( document ).ready(function() { //testataan onko jquery kirjasto ladattu
		
			$.ajax({ //mistä koodi löytyy
                url: "ilmoitusJSONHae.php",
                method: "get", //millä metodilla haetaan
                dataType: "json" //missä muodossa
            })
			.done(function(data) { //jos onnistuu
                //alert("ok");
                for (var i = 0; i < data.length; i++) { //käydään objektitaulukko läpi
                    $("#lista").append("<p>Otsikko: " + data[i].otsikko +
                                       "<br>Hinta: " + data[i].hinta +
                                       "<br>Kuvaus: " + data[i].kuvaus +
                                       "</p>")            //viittaa id listaan
                }
            })
			.fail(function(jqXHR, textStatus, message ) {
 		         //alert("virhe");
                $("#lista").append("<p>Tietoja ei saatu haettua</p>")
			})
			
		})

    </script>
</body>
</html>
